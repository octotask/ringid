/*! <%= grunt.template.today('yyyy-mm-d') */
!function(a){"use strict";function b(b){function c(){u.dom.controlLayer.style.bottom="-60px",u.dom.controlBG.style.opacity=0,v&&clearTimeout(v),u.controlState=!1,u.addRemoveClass(u.dom.container,[],["hover"])}function d(){var a=document.mozFullScreen||document.webkitIsFullScreen;a||"FULL"!==u.screenState||u.fullScreen()}function e(a){var b=a.which||a.keyCode||a.key;32===b&&u.playPause()}function f(a){a.stopPropagation(),u.playPause()}function g(a){a.stopPropagation(),u.muteUnmute()}function h(a){a.stopPropagation(),u.fullScreen()}function i(a){u.timeInfo(a),u.isMouseDown&&u.setPosition(a,!1)}function j(){u.isMouseDown=!0,u.addRemoveClass(u.dom.barContainer,["down"],[])}function k(a){u.isMouseDown=!1,u.setPosition(a,!0),u.addRemoveClass(u.dom.barContainer,[],["down"])}function l(){u.isMouseDown=!1,u.addRemoveClass(u.dom.barContainer,[],["down"])}function m(a){a.stopPropagation(),u.deferControlHide(),u.controlState||"PLAYING"!==u.playingState?u.playPause():u.showControl(),u.isTouchable&&u.addRemoveClass(u.dom.container,["hover"],["hover"])}function n(a){a.stopPropagation(),u.addRemoveClass(u.dom.container,["hover"],["hover"]),u.isTouchable||(u.controlState&&"PLAYING"===u.playingState?u.deferControlHide():u.showControl())}function o(a){a.stopPropagation(),u.addRemoveClass(u.dom.container,[],["hover"])}function p(a){a.stopPropagation(),u.showTootip(a,this.getAttribute("tooltip"))}function q(a){a.stopPropagation(),u.dom.controlTip.style.display="none"}function r(a){var b;a.stopPropagation(),b=parseInt(this.getAttribute("data-rel"),10),u.changeVolume(b)}function s(a){a.stopPropagation(),u.addRemoveClass(u.dom.container,[],["hover"])}function t(b){b.stopPropagation(),b.preventDefault(),a.location="https://www.ringid.com"}var u=this,v=null;return u.dicts={maximize:"Back to normal view",minimize:"Go to small view",fullScreen:"Full Screen",auto:"Auto Play"},u.webview='<div class="rg-player webview"><div class="container"></div></div>',u.template='<div class="rg-player"><div class="container"><div class="play-info"></div><div class="play-error"></div><div class="player-debug">Meta Data</div> <div class="music-bars"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><div class="big-play"><span class="player-sprite icon-player"></span></div><div style="display:none;" class="loader"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div></div><div class="player-poster"><img class="poster" /></div><div class="ringid-logo"></div></div><div class="media-control"><div class="media-tip"></div><div class="media-control-bg"></div><div class="media-control-layer"><div class="bar-panel"><div class="bar-container"><div class="bar-background"><div class="bar-fill-1"></div><div class="bar-fill-2"></div><div class="bar-hover"></div></div><div class="bar-scrubber"><div class="bar-scrubber-icon"></div></div><div class="seek-time"><div class="timer"></div></div></div></div><div class="control-left"><div class="play-btns"><button class="player-sprite icon-play-p control-btn start-btn"></button></div><div class="volume-bar"><div class="player-sprite icon-speaker-fill volume-icon unmute"></div><div class="volume-bar-container volume-bar-hide"><div data-rel="0" class="bar fill"></div><div data-rel="1" class="bar fill"></div><div data-rel="2" class="bar fill"></div><div data-rel="3" class="bar fill"></div><div data-rel="4" class="bar"></div><div data-rel="5" class="bar"></div><div data-rel="6" class="bar"></div><div data-rel="7" class="bar"></div><div data-rel="8" class="bar"></div><div data-rel="9" class="bar"></div></div></div><div class="time-indicator time-running"></div><div class="time-indicator time-total"></div></div><div class="control-right"><button class="control-btn hd">HD</button><button class="player-sprite icon-screen-f control-btn full-screen" tooltip="'+this.dicts.fullScreen+'"></button></div></div></div></div>',u.secToTime=function(a){var b,c,d,e="";return b=Math.floor(a),c=parseInt(b/3600,10)%24,d=parseInt(b/60,10)%60,b=b<0?0:b%60,c>0&&(e+=c<10?"0"+c:c),e+=(d<10?"0"+d:d)+":"+(b<10?"0"+b:b)},u.findPos=function(a){var b=0,c=0,d=a;if(d.offsetParent)do b+=d.offsetLeft,c+=d.offsetTop;while(null!==(d=d.offsetParent));return{x:b,y:c}},u.destroy=function(){try{u.removeEvent(),u.provider.pause(),u.provider.src="",u.dom=null,delete u.provider}catch(a){throw new Error("undfined instance provided. ignoring...")}},u.addRemoveClass=function(a,b,c){var d;for(d=0;d<c.length;d++)a.className=a.className.replace(c[d],"").trim();for(d=0;d<b.length;d++)a.className+=" "+b[d]},u.createMediaObject=function(a){return"audio"===a?document.createElement("audio"):document.createElement("video")},u.init=function(){return u.source=b.source||"",u.autoPlay=b.autoPlay||!1,u.auto=b.auto||!1,u.parent=document.getElementById(b.parentId),u.poster=b.poster||"",u.mediaType=b.type||"video",u.dom={},u.playingState=this.autoPlay?"INIT":"STOPPED",u.bufferState="BUFFERING",u.screenState="NORMAL",u.volumeState="UNMUTE",u.controlState=!0,u.volume=5,u.duration=0,u.currentTrack=0,u.title=b.title||"",u.hd=!1,u.debug=!1,u.isMouseDown=!1,u.isTouchable="ontouchstart"in a||navigator.msMaxTouchPoints,u.isTouchInitiate=!1,u.isTouchable&&(u.autoPlay=!1),u.isLoading=u.autoPlay,u.isFirefox=!!navigator.userAgent.match(/firefox/i),u.isSafari=!!navigator.userAgent.match(/safari/i),u.isWebView=!a.navigator.standalone&&!u.isSafari&&!u.isFirefox,u.canPlay=!0,u.isWebView&&(u.mediaType="video"),u.provider=u.createMediaObject(u.mediaType),u.isWebView?(u.provider.src=b.source,u.provider.setAttribute("airplay","allow"),u.provider.setAttribute("controls","true"),u.provider.setAttribute("x-webkit-airplay","allow"),u.poster&&u.provider.setAttribute("poster",u.poster),u.parent.innerHTML=u.webview,u.dom.player=u.parent.querySelector(".rg-player"),u.dom.container=u.parent.querySelector(".container"),u.dom.player.style.width=b.width?b.width+"px":"100%",u.dom.player.style.height=b.height?b.height+"px":"100%",void u.dom.container.appendChild(u.provider)):(u.parent.innerHTML=u.template,u.dom.player=u.parent.querySelector(".rg-player"),u.dom.container=u.parent.querySelector(".container"),u.dom.control=u.parent.querySelector(".media-control"),u.dom.bigBlay=u.dom.container.querySelector(".big-play"),u.dom.bigBlayIcon=u.dom.bigBlay.querySelector("span"),u.dom.playError=u.dom.container.querySelector(".play-error"),u.dom.debug=u.dom.container.querySelector(".player-debug"),u.dom.playInfo=u.dom.container.querySelector(".play-info"),u.dom.musicBar=u.dom.container.querySelector(".music-bars"),u.dom.loader=u.dom.container.querySelector(".loader"),u.dom.poster=u.dom.container.querySelector(".player-poster"),u.dom.logo=u.dom.container.querySelector(".ringid-logo"),u.dom.posterImg=u.dom.poster.querySelector(".poster"),u.dom.barContainer=u.dom.control.querySelector(".bar-container"),u.dom.barScrubber=u.dom.control.querySelector(".bar-scrubber"),u.dom.barLoaded=u.dom.control.querySelector(".bar-fill-1"),u.dom.barPosition=u.dom.control.querySelector(".bar-fill-2"),u.dom.barHover=u.dom.control.querySelector(".bar-hover"),u.dom.controlLayer=u.dom.control.querySelector(".media-control-layer"),u.dom.controlBG=u.dom.control.querySelector(".media-control-bg"),u.dom.controlTip=u.dom.control.querySelector(".media-tip"),u.dom.playBtn=u.dom.control.querySelector(".start-btn"),u.dom.timeRunning=u.dom.control.querySelector(".time-running"),u.dom.timeTotal=u.dom.control.querySelector(".time-total"),u.dom.hd=u.dom.control.querySelector(".hd"),u.dom.volumeIcon=u.dom.control.querySelector(".volume-icon"),u.dom.volumeBarContainer=u.dom.control.querySelector(".volume-bar-container"),u.dom.volumeBars=u.dom.volumeBarContainer.querySelectorAll(".bar"),u.dom.fullScreenBtn=u.dom.control.querySelector(".full-screen"),u.dom.seekTimer=u.dom.control.querySelector(".seek-time"),u.dom.timer=u.dom.control.querySelector(".timer"),u.dom.player.style.width=b.width?b.width+"px":"100%",u.dom.player.style.height=b.height?b.height+"px":"100%",u.dom.timeRunning.innerHTML="00:00",u.dom.timeTotal.innerHTML="00:00",u.dom.poster.appendChild(u.provider),void(u.autoPlay&&(u.dom.loader.style.display="block")))},u.initEvent=function(){var b;for(u.dom.playBtn.addEventListener("click",f,!1),u.dom.volumeIcon.addEventListener("click",g,!1),u.dom.fullScreenBtn.addEventListener("click",h,!1),u.dom.container.addEventListener("click",m,!1),u.dom.container.addEventListener("mouseover",n,!1),u.dom.container.addEventListener("mouseleave",o,!1),u.isTouchable&&(u.dom.barContainer.addEventListener("touchmove",i,!1),u.dom.barContainer.addEventListener("touchstart",j,!1),u.dom.barContainer.addEventListener("touchend",k,!1),u.dom.barContainer.addEventListener("touchcancel",l,!1)),u.dom.barContainer.addEventListener("mousemove",i,!1),u.dom.barContainer.addEventListener("mousedown",j,!1),u.dom.barContainer.addEventListener("mouseup",k,!1),u.dom.barContainer.addEventListener("mouseleave",l,!1),u.dom.logo.addEventListener("click",t,!1),b=0;b<u.dom.volumeBars.length;b++)u.dom.volumeBars[b].addEventListener("click",r);u.dom.fullScreenBtn.addEventListener("mouseover",p,!1),u.dom.fullScreenBtn.addEventListener("mouseleave",q,!1),document.addEventListener("mozfullscreenchange",d,!1),document.addEventListener("webkitfullscreenchange",d,!1),document.addEventListener("fullscreenchange",d,!1),document.addEventListener("keyup",e,!1),u.isTouchable&&a.addEventListener("touchend",s),u.setMediaEvent(),u.showPoster(!0)},u.setMediaEvent=function(){u.provider.addEventListener("loadedmetadata",function(){u.initTime(u.provider.duration),u.autoPlay&&(u.play(),u.deferControlHide(),u.controlState=!0)}),u.provider.addEventListener("timeupdate",function(){var a,b,c,d;u.provider&&!u.isMouseDown&&(d=u.provider.duration,c=u.provider.currentTime,a=u.provider.buffered.length>0?u.provider.buffered.end(u.provider.buffered.length-1):0,b=c+.05>=a?"BUFFERING":"PLAYING_BUFFERING",(4!==u.provider.readyState||c<.05||0===a)&&(b="BUFFERING"),u.showBuffered(a,d),u.stateChanged(b),u.bufferState=b,u.showPosition(c,d),u.showDebug())}),u.provider.addEventListener("play",function(){u.stateChanged("PLAYING"),"video"===u.mediaType&&u.showPoster(!1)}),u.provider.addEventListener("pause",function(){u.stateChanged("PAUSED"),"video"===u.mediaType&&u.showPoster(!1)}),u.provider.addEventListener("ended",function(){u.stateChanged("ENDED"),"video"===u.mediaType&&u.showPoster(!1)}),u.provider.addEventListener("stalled",function(){!u.provider}),u.provider.addEventListener("error",function(){u.provider&&(u.error=u.provider.error.code,u.canPlay=!1,u.showError())})},u.removeEvent=function(){var a;for(u.dom.playBtn.removeEventListener("click",f),u.dom.volumeIcon.removeEventListener("click",g),u.dom.fullScreenBtn.removeEventListener("click",h),u.dom.barContainer.removeEventListener("mousemove",i),u.dom.barContainer.removeEventListener("mousedown",j),u.dom.barContainer.removeEventListener("mouseup",k),u.dom.barContainer.removeEventListener("mouseleave",l),u.dom.barContainer.removeEventListener("touchmove",i),u.dom.barContainer.removeEventListener("touchstart",j),u.dom.barContainer.removeEventListener("touchend",k),u.dom.barContainer.removeEventListener("touchcancel",l),u.dom.container.removeEventListener("click",m),a=0;a<u.dom.volumeBars.length;a++)u.dom.volumeBars[a].removeEventListener("click",r);u.dom.fullScreenBtn.removeEventListener("mouseover",p),u.dom.fullScreenBtn.removeEventListener("mouseleave",q),document.removeEventListener("mozfullscreenchange",d),document.removeEventListener("webkitfullscreenchange",d),document.removeEventListener("fullscreenchange",d),document.removeEventListener("keyup",e)},u.playPause=function(){if(u.canPlay)return"PLAYING"===u.playingState?(u.pause(),u.showLoader(),u.showControl(),u.showInfo(!0),void c()):"PAUSED"===u.playingState?(u.resume(),u.showLoader(),u.showBigPlay(),u.showControl(),void u.showInfo()):"STOPPED"===u.playingState?(u.play(),u.showLoader(),u.showBigPlay(),u.showInfo(),void u.showControl()):void 0},u.muteUnmute=function(){return"UNMUTE"===u.volumeState?(u.provider.muted=!0,u.addRemoveClass(u.dom.volumeIcon,["icon-speaker-m"],["icon-speaker-fill"]),void(u.volumeState="MUTE")):"MUTE"===u.volumeState?(u.provider.muted=!0,u.addRemoveClass(u.dom.volumeIcon,["icon-speaker-fill"],["icon-speaker-m"]),void(u.volumeState="UNMUTE")):void 0},u.initTime=function(a){u.dom.timeTotal.innerHTML=u.secToTime(a),u.duration=a},u.showPosition=function(a,b){0===u.duration&&b>0&&u.initTime(b),a>b&&u.initTime(a),u.dom.timeRunning.innerHTML=u.secToTime(a),u.dom.barScrubber.style.left=0===u.duration?"-"+u.dom.barScrubber.offsetWidth/2+"px":"calc("+a/u.duration*100+"% - "+u.dom.barScrubber.offsetWidth/2+"px)",u.dom.barPosition.style.width=0===u.duration?"0%":a/u.duration*100+"%"},u.showBuffered=function(a,b){0===u.duration&&b>0&&u.initTime(b),u.dom.barLoaded.style.width=0===u.duration?"0%":a/u.duration*100+"%"},u.timeInfo=function(a){var b,c,d,e;"touchend"!==a.type&&(e=a.pageX?a.pageX:a.touches[0].pageX,b="FULL"===u.screenState?{x:0,y:0}:u.findPos(u.dom.barContainer),c=e-b.x,d=Math.round(c*u.duration/u.dom.barContainer.offsetWidth),d<0&&(d=0),u.dom.timer.innerHTML=u.secToTime(d),u.dom.seekTimer.style.left=c-u.dom.seekTimer.offsetWidth/2+"px",u.dom.barHover.style.left=c-u.dom.barHover.offsetWidth/2+"px")},u.showTootip=function(a,b){var c,d,e,f,g;"touchend"!==a.type&&(c=a.pageX?a.pageX:a.touches[0].pageX,d="FULL"===u.screenState?{x:0,y:0}:u.findPos(u.dom.barContainer),e=c-d.x,u.dom.controlTip.innerHTML=b,u.dom.controlTip.style.display="block",f=u.dom.barContainer.offsetWidth,g=u.dom.controlTip.offsetWidth,e=f<=g/2+e?f-g/2:e,u.dom.controlTip.style.left=e-g/2+"px")},u.setPosition=function(a,b){var c,d,e,f;if("STOPPED"!==u.playingState&&u.canPlay){if("touchend"===a.type)return e=u.findPos(u.dom.barScrubber).x,f=Math.round(e*u.duration/u.dom.barContainer.offsetWidth),void u.seek(f);c=a.pageX?a.pageX:a.touches[0].pageX,d="FULL"===u.screenState?{x:0,y:0}:u.findPos(u.dom.barContainer),e=c-d.x,f=Math.round(e*u.duration/u.dom.barContainer.offsetWidth),b&&u.seek(f),u.showPosition(f)}},u.changeVolume=function(a){var b;for(b=0;b<u.dom.volumeBars.length;b++)u.addRemoveClass(u.dom.volumeBars[b],[],["fill"]);for(b=0;b<=a;b++)u.addRemoveClass(u.dom.volumeBars[b],["fill"],[]);return u.volume=a+1,"MUTE"===u.volumeState?void u.muteUnmute():void u.setVolume(u.volume)},u.showHD=function(){u.hd?u.dom.hd.style.display="inline-block":u.dom.hd.style.display="none"},u.showPoster=function(a){""!==u.poster&&(a?(u.dom.posterImg.src=u.poster,u.dom.posterImg.style.display="inline-block"):u.dom.posterImg.style.display="none")},u.showInfo=function(a){""===u.title||"audio"!==u.mediaType||a?u.dom.playInfo.style.display="none":(u.dom.playInfo.innerHTML=u.title,u.dom.playInfo.style.display="block")},u.showLoader=function(){u.isTouchable&&!u.isTouchInitiate||(u.isLoading&&u.canPlay&&"BUFFERING"===u.bufferState?u.dom.loader.style.display="block":u.dom.loader.style.display="none",u.showMusicBar(),u.showBigPlay())},u.showError=function(){u.dom.playError.innerHTML="Sorry, your browser does not support this media format OR your are trying to access invalid URL.",u.canPlay?u.dom.playError.style.display="none":(u.showPoster(!1),u.showLoader(),u.dom.playError.style.display="block",u.showBigPlay(),u.addRemoveClass(u.dom.playBtn,["icon-play-p"],["icon-pause-p","icon-play-p"]))},u.showBigPlay=function(a){return u.canPlay?(a?u.addRemoveClass(u.dom.bigBlayIcon,["icon-reload-p"],[]):u.addRemoveClass(u.dom.bigBlayIcon,[],["icon-reload-p"]),a&&"STOPPED"===u.playingState?void(u.dom.bigBlay.style.display="block"):("PAUSED"!==u.playingState&&"STOPPED"!==u.playingState&&(!u.isTouchable||u.isTouchInitiate)||u.isLoading?u.dom.bigBlay.style.display="none":u.dom.bigBlay.style.display="block",void u.showMusicBar())):void(u.dom.bigBlay.style.display="none")},u.setAuto=function(a){return a?void u.addRemoveClass(u.dom.auto,["enbled"],[]):u.auto?(u.auto=!1,void u.addRemoveClass(u.dom.auto,[],["enbled"])):u.auto?void 0:(u.auto=!0,void u.addRemoveClass(u.dom.auto,["enbled"],[]))},u.showMusicBar=function(){"audio"!==u.mediaType||"PLAYING"!==u.playingState||"PLAYING_BUFFERING"!==u.bufferState||u.isLoading?u.dom.musicBar.style.display="none":u.dom.musicBar.style.display="block"},u.showControl=function(){"PLAYING"===u.playingState&&(u.dom.controlLayer.style.bottom="0px",u.dom.controlBG.style.opacity=1,u.controlState=!0,u.deferControlHide())},u.deferControlHide=function(){v&&clearTimeout(v),u.controlState&&(v=setTimeout(c,6e3))},u.showDebug=function(){var a;u.debug&&(a=u.provider.buffered.length>0?u.provider.buffered.end(u.provider.buffered.length-1):0,u.dom.debug.innerHTML="ready State: "+u.provider.readyState+" <br />Buffered: "+a+" <br />Current time: "+u.provider.currentTime+" <br />Playing State: "+u.playingState+" <br />Buffer State: "+u.bufferState+" <br />Loading State: "+(u.isLoading?"true":"false"))},u.stateChanged=function(a){"BUFFERING"===u.bufferState?u.isLoading=!0:u.isLoading=!1,"PLAYING"===a&&(u.playingState="PLAYING",u.showBigPlay(),u.addRemoveClass(u.dom.playBtn,["icon-pause-p"],["icon-play-p","icon-pause-p"])),"ENDED"!==a&&"IDLE"!==a||(u.playingState="STOPPED",u.bufferState="BUFFERING",u.isLoading=!1,u.showBigPlay(!0),u.addRemoveClass(u.dom.playBtn,["icon-play-p"],["icon-pause-p","icon-play-p"]),u.initTime(0),u.showPosition(0),u.showInfo(!0)),u.showLoader()},u.reset=function(){u.isLoading=!0,u.initTime(0),u.showPosition(0),u.showBuffered(0),u.showLoader(),u.showInfo()},u.fullScreen=function(){if("NORMAL"===u.screenState){if(u.dom.player.requestFullscreen)u.dom.player.requestFullscreen();else if(u.dom.player.mozRequestFullScreen)u.dom.player.mozRequestFullScreen();else{if(!u.dom.player.webkitRequestFullScreen)return!1;u.dom.player.webkitRequestFullScreen()}return u.screenState="FULL",u.showControl(),u.addRemoveClass(u.dom.player,["full"],[]),u.addRemoveClass(u.dom.fullScreenBtn,["icon-screen-fe"],["icon-screen-f"]),u.dom.fullScreenBtn.setAttribute("tooltip",u.dicts.maximize),u.isTouchable&&(u.dom.controlTip.style.display="none"),!0}return"FULL"!==u.screenState||(document.cancelFullscreen?document.cancelFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),u.addRemoveClass(u.dom.player,[],["full"]),u.addRemoveClass(u.dom.fullScreenBtn,["icon-screen-f"],["icon-screen-fe"]),u.screenState="NORMAL",u.dom.fullScreenBtn.setAttribute("tooltip",u.dicts.fullScreen),u.isTouchable&&(u.dom.controlTip.style.display="none"),!0)},u.load=function(a){u.reset(),u.provider.pause(),u.seek(0),u.provider.src=a,u.source=a},u.play=function(){u.provider.play(),u.playingState="PLAYING",u.addRemoveClass(u.dom.playBtn,["icon-pause-p"],["icon-play-p","icon-pause-p"]),u.isTouchInitiate||(u.isLoading=!0),u.isTouchInitiate=!0},u.pause=function(){u.provider.pause(),u.playingState="PAUSED",u.addRemoveClass(u.dom.playBtn,["icon-play-p"],["icon-pause-p","icon-play-p"])},u.resume=function(){u.provider.play(),u.playingState="PLAYING",u.addRemoveClass(u.dom.playBtn,["icon-pause-p"],["icon-play-p","icon-pause-p"])},u.seek=function(a){try{u.provider.currentTime=a}catch(b){throw new Error("provider is not defined. So ignoring...")}},u.stop=function(){u.provider.pause(),u.seek(0),u.playingState="STOPPED",u.addRemoveClass(u.dom.playBtn,["icon-play-p"],["icon-pause-p","icon-play-p"])},u.setVolume=function(a){u.provider.volume=a/10},u.init(),u.isWebView||(u.initEvent(),u.showBigPlay(),u.showError(),u.showInfo(),u.showMusicBar(),u.showHD(),u.playingState="STOPPED",u.provider.autoplay=!1,u.autoPlay&&u.addRemoveClass(u.dom.playBtn,["icon-pause-p"],["icon-play-p","icon-pause-p"]),u.debug&&(u.dom.debug.style.display="block"),u.load(b.source),u.setVolume(u.volume)),u}a.Player=b}(window);